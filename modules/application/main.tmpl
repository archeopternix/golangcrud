{{define "main" -}}
// Package main contains just the initialisation code for the Server and Databse
// access
// Generated code - do not modify it will be overwritten!!
// Time: {{.TimeStamp}}
package main

import (
	view "{{.Name}}/view"
	model "{{.Name}}/model"
	database "{{.Name}}/database"
)

func main() {
	env := model.Env{
  {{- range .Entities}}
      {{.Name | plural}}:  database.New{{.Name}}Repo(),
  {{- end}}		
  {{- range $key, $value := .Lookups}}
      {{title $key}}: model.New{{title $key}}Repo(),
  {{- end}}		
	}
	server := view.NewServer(&env)
	// Start server
	server.Logger.Fatal(server.Start(":8080"))
}
{{end}}