{{define "repository" -}}
package database


import (
	model {{.Config.Name}}/model
)

// Env holds all interfaces describing the methods of the entity access structs.
// Interfaces have to be implemented by concrete DB access functions 
type Env struct {
	{{- range .Entities }}
	{{.Name | lowercase | plural}} interface {
		Get(id uint64) (*model.{{.Name}}, error)
		GetAll() (model.{{.Name}}List, error) 
		Delete(id uint64) error 
		UpdateOrInsert({{.Name | lowercase}} *model.{{.Name}}) error 
	 	GetLabels() (Labels, error)
		GetAllForParentID(parentId uint64, parentfield string) (model.{{.Name}}List, error)				
	}
	{{- end}}
}

// Labels will be populated by the unique id and all fields tagged with isLabel=true
type Labels map[uint64]string
{{- end}}